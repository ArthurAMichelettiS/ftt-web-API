
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FTT - User</title>
<style>
	body {font-family:Verdana;}
</style>
</head>
<body onLoad="reloadPage()">
<h1>User</h1>
<!--  get, post ok -->
<form method="post" action="/ftt-WEB-api/user">
<p><label for="user-id">ID: </label><input type="number" id="user-id" name="user-id" required></p>
<p><label for="user-name">Name: </label><input type="text" id="user-name" name="user-name" required></p>
<p><label for="user-email">E-Mail: </label><input type="email" id="user-email" name="user-email" required></p>
<p><label for="user-color">Color: </label><input type="color" id="user-color" name="user-color" required></p>
<input type="submit">
</form>
</body>
<script>

function reloadPage() {
  var username = window.localStorage.getItem('user');
  url = `/user?user-id=${username}`;

  var xhr = new XMLHttpRequest();

  xhr.onload = function () {

    if (xhr.status >= 200 && xhr.status < 300) {

      var reps = JSON.parse(xhr.responseText);
      createNewsCards(reps);

    } else {

      let error_message = "ERROR!" + xhr.statusText;
      document.getElementById("Repositorios").innerHTML = error_message;
    }
  };

  xhr.open('GET', url);
  xhr.send();

}

function createNewsCards(nData) {

  for (i in nData) {

    var card = document.createElement("div"); //Card
    card.setAttribute("class", "card");

    var data = document.createElement("div"); //Date text
    data.setAttribute("class", "data");

    var time = document.createElement("time"); //Creation date of repository

    data.innerHTML = "CRIADO EM:"
    data.appendChild(time)

    var name = document.createElement("h2"); //Repository name

    var description = document.createElement("div"); //Repository description
    description.setAttribute("class", "info");

    var language = document.createElement("div"); //Language name
    language.setAttribute("class", "tags");

    time.innerText = nData[i].user-color;

    name.innerText = nData[i].user-id;
    description.innerText = nData[i].user-name;
    language.innerText = nData[i].user-email;

    // Append the text to cards
    card.appendChild(data);
    card.appendChild(name);
    card.appendChild(description);
    card.appendChild(language);

    document.getElementById("container").appendChild(card);

  }
}

</script>
</html>