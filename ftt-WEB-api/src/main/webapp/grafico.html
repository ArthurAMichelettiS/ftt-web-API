<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>User</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="css/style.css" />
    <script src="js/script.js" type="text/javascript"></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script>
		const request = new XMLHttpRequest();
		request.open("GET", "/ftt-WEB-api/chart");
  
		request.onload = function () {
  
		  const response = JSON.parse(this.responseText);
		  console.log(JSON.parse(this.responseText));
		  var qtd1 = 0;
		  var qtd2 = 0;
		  var qtd3 = 0;
		  for(let line of response){
			qtd1= qtd1+Number(line.qtdHappy);
			qtd2= qtd2+Number(line.qtdSad);
			qtd3= qtd3+Number(line.qtdConfused);
		}
			var ctx = document.getElementById('myChart').getContext('2d');
			var myChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: ['Sad', 'Happy', 'Confused'],
					datasets: [{
						label: '# de Info',
						data: [qtd1, qtd2, qtd3],
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(54, 162, 235, 0.2)',
							'rgba(255, 206, 86, 0.2)'
						],
						borderColor: [
							'rgba(255, 99, 132, 1)',
							'rgba(54, 162, 235, 1)',
							'rgba(255, 206, 86, 1)'
						],
						borderWidth: 1
					}]
				},
				options: {
					scales: {
						y: {
							beginAtZero: true
						}
					}
				}
			});
		  
		  console.log(table)
		};
  
		request.onerror = function () {
		  alert("erro ao executar a requisição");
		};
  
		request.send();
	  </script>
</head>
<body >
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="index.html">Home</a>
        <a class="navbar-brand" href="lista.html">Lista</a>
        <a class="navbar-brand" href="grafico.html">Gráfico</a>
      </nav>


 <canvas id="myChart" width="400" height="400"></canvas>

	
<script>


</script>
</body>
</html>